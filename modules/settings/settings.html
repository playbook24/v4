<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ORB - Paramètres</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Anton&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../../style.css">
    
    <style>
        .settings-container {
            max-width: 600px;
            margin: 40px auto;
            background: var(--color-container);
            padding: 30px;
            border-radius: 12px;
            box-shadow: var(--shadow-lifted);
            border: 1px solid var(--color-border);
        }
        
        .settings-group {
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--color-border);
        }
        .settings-group:last-child { border-bottom: none; }
        
        .settings-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .settings-row span { font-weight: bold; font-size: 1.1em; }
        
        .toggle-btn {
            background: var(--color-background);
            border: 1px solid var(--color-border);
            color: var(--color-text);
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            font-family: 'Roboto', sans-serif;
            transition: all 0.2s;
        }
        .toggle-btn:hover { background: #e0e0e0; }
        .toggle-btn.active { background: var(--color-primary); color: white; border-color: var(--color-primary); }
        
        /* Ajustements pour le mode clair / sombre du bouton lui-même */
        body:not(.light-mode) .toggle-btn:hover { background: #444; }
        
        .info-text { font-size: 0.85em; opacity: 0.7; margin-top: -5px; line-height: 1.4; }
    </style>
</head>
<body>

    <header class="app-header">
        <div class="header-content" style="display: flex; align-items: center; max-width: 1200px; margin: 0 auto; width: 100%;">
            <a href="../../index.html" class="header-back-btn" style="text-decoration: none; display: flex; align-items: center;">
                <svg viewBox="0 0 24 24" style="width:28px; height:28px; fill:currentColor; margin-right: 15px;"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
            </a>
            <h1 style="margin: 0; text-align: center; flex-grow: 1; padding-right: 43px;">ORB <span class="highlight">PARAMÈTRES</span></h1>
        </div>
    </header>

    <main class="settings-container">
        
        <div class="settings-group">
            <h2 style="margin-top:0;">Apparence</h2>
            <div class="settings-row">
                <span>Mode Clair</span>
                <button id="theme-toggle-btn" class="toggle-btn">Activer</button>
            </div>
            <p class="info-text">Un thème clair classique pour plus de contraste en plein jour.</p>
            
            <div class="settings-row" style="margin-top: 20px;">
                <span>Thème "Crab"</span>
                <button id="team-theme-btn" class="toggle-btn">Activer</button>
            </div>
            <p class="info-text">Personnalisation aux couleurs de l'équipe locale.</p>
        </div>

        <div class="settings-group">
            <h2>Éditeur Tactique</h2>
            <div class="settings-row">
                <span>Mode de tracé</span>
                <button id="input-mode-btn" class="toggle-btn">Souris</button>
            </div>
            <p class="info-text">
                <strong>Souris :</strong> Les lignes se tracent clic par clic.<br>
                <strong>Stylet :</strong> Dessin libre pour tablettes tactiles.
            </p>
        </div>

        <div class="settings-group" style="text-align: center; opacity: 0.6; padding-top: 10px;">
            <p style="margin: 0; font-weight: bold;">ORB Tactical Board V4</p>
            <p style="margin: 5px 0 0 0; font-size: 0.9em;">Créé par Augier Flavien</p>
        </div>

    </main>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Applique les thèmes globaux au chargement (V4 est sombre par défaut)
            if (localStorage.getItem('theme') === 'light') document.body.classList.add('light-mode');
            if (localStorage.getItem('teamMode') === 'crab') document.body.classList.add('crab-mode');

            // Références boutons
            const themeBtn = document.getElementById('theme-toggle-btn');
            const teamThemeBtn = document.getElementById('team-theme-btn');
            const inputModeBtn = document.getElementById('input-mode-btn');

            // Initialisation état visuel des boutons
            if (localStorage.getItem('theme') === 'light') { themeBtn.textContent = 'Désactiver'; themeBtn.classList.add('active'); }
            if (localStorage.getItem('teamMode') === 'crab') { teamThemeBtn.textContent = 'Désactiver'; teamThemeBtn.classList.add('active'); }
            
            const currentMode = localStorage.getItem('inputMode') || 'mouse';
            inputModeBtn.textContent = currentMode === 'stylus' ? 'Stylet' : 'Souris';
            if (currentMode === 'stylus') inputModeBtn.classList.add('active');

            // Actions : Thème Clair / Sombre
            themeBtn.addEventListener('click', () => {
                document.body.classList.toggle('light-mode');
                const isLight = document.body.classList.contains('light-mode');
                localStorage.setItem('theme', isLight ? 'light' : 'dark');
                themeBtn.textContent = isLight ? 'Désactiver' : 'Activer';
                themeBtn.classList.toggle('active', isLight);
            });

            // Actions : Thème Crab
            teamThemeBtn.addEventListener('click', () => {
                document.body.classList.toggle('crab-mode');
                const isCrab = document.body.classList.contains('crab-mode');
                localStorage.setItem('teamMode', isCrab ? 'crab' : 'orb');
                teamThemeBtn.textContent = isCrab ? 'Désactiver' : 'Activer';
                teamThemeBtn.classList.toggle('active', isCrab);
            });

            // Actions : Input Mode (Souris / Stylet)
            inputModeBtn.addEventListener('click', () => {
                const newMode = inputModeBtn.textContent === 'Souris' ? 'stylus' : 'mouse';
                localStorage.setItem('inputMode', newMode);
                inputModeBtn.textContent = newMode === 'stylus' ? 'Stylet' : 'Souris';
                inputModeBtn.classList.toggle('active', newMode === 'stylus');
            });
        });
    </script>
</body>
</html>